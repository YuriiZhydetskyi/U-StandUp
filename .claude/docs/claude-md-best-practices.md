# Best Practices для CLAUDE.md

## Головне правило
Для кожного рядка запитай себе: "Якщо це прибрати — Claude зробить помилку?" Якщо ні — видали.

## Оптимальний розмір
- 50-100 рядків — ідеально
- До 200 рядків — прийнятно
- 300+ рядків — Claude починає ігнорувати інструкції
- Системний промпт Claude Code вже містить ~50 інструкцій, тому CLAUDE.md має бути компактним

## Що ВКЛЮЧАТИ

### Команди, які Claude не вгадає сам
- Кастомні npm-скрипти (`npm run build`, `npm run test:single`)
- Нестандартні білд-процеси
- Специфічні env-змінні

### Стиль коду, що відрізняється від стандартів
- "ES modules, не CommonJS"
- "Завжди функціональні компоненти з hooks"
- Конвенції іменування файлів

### Інструкції з тестування
- Як запускати тести
- Який фреймворк використовується
- Що має бути покрито тестами

### Архітектурні рішення
- Де що лежить і чому
- Ключові патерни проєкту
- Залежності між модулями

### Важливі застереження
- Файли, які не можна редагувати
- Відомі баги чи обхідні шляхи
- Інтеграції з зовнішніми сервісами

### Доменна термінологія
- Бізнес-терміни → як вони відображені у коді

## Що НЕ ВКЛЮЧАТИ
- Те, що Claude дізнається, прочитавши код (структура очевидна)
- Стандартні конвенції мови (Claude і так знає)
- Детальну API-документацію (краще посилання)
- Інформацію, що часто змінюється (застаріє)
- Довгі пояснення чи туторіали
- Опис кожного файлу (нехай Claude сам досліджує)
- Правила стилю, які забезпечуються лінтерами (використовуй hooks)
- Очевидні речі типу "пиши чистий код"

## Структура файлу (шаблон)

```markdown
# Назва проєкту
[Одне речення — що це за проєкт]

## Tech Stack
- [Фреймворк + мова + ключові бібліотеки]

## Commands
- `npm run dev` — опис
- `npm run build` — опис
- `npm run test` — опис

## Структура проєкту
- `/src/components/` — що тут
- `/src/lib/` — що тут

## Code Style
- [Тільки те, що відрізняється від стандартів]

## Важливі правила
- [Критичні застереження]
- [Що зламається якщо зробити неправильно]
```

## Підсилення важливих правил
- Додай "ВАЖЛИВО:" або "НІКОЛИ:" перед критичними правилами
- Claude краще дотримується інструкцій із сильними маркерами

## Модульність для великих проєктів

### @imports — посилання на інші файли
```markdown
Див. @README.md для огляду проєкту
Див. @docs/api-patterns.md для API-конвенцій
```

### .claude/rules/ — автоматичне завантаження
Всі .md файли з `.claude/rules/` завантажуються автоматично:
```
.claude/
  rules/
    code-style.md
    testing.md
    security.md
```

### CLAUDE.local.md — персональні налаштування
- Для особистих преференцій, не для команди
- Додай у .gitignore

## Ієрархія файлів CLAUDE.md
1. `~/.claude/CLAUDE.md` — глобальний (для всіх проєктів)
2. `./CLAUDE.md` — проєктний (комітиться в git)
3. `./CLAUDE.local.md` — локальний (в .gitignore)
4. `./subdirectory/CLAUDE.md` — підвантажується коли Claude працює з файлами в цій директорії

## Інші фічі Claude Code

### Hooks (детерміністичні дії)
- Налаштовуються в `.claude/settings.json`
- Події: `PreToolUse`, `PostToolUse`, `UserPromptSubmit`
- Приклад: "Запускай eslint після кожного редагування файлу"
- На відміну від CLAUDE.md — hooks гарантовано виконуються щоразу

### Custom Slash Commands
- Зберігаються як .md файли у `.claude/commands/`
- Підтримують аргументи через `$ARGUMENTS`
- Для повторюваних робочих процесів

### Skills
- Файли `SKILL.md` у `.claude/skills/`
- Активуються автоматично за описом (семантичний матчинг)
- До 500 рядків
- Для доменних знань, що потрібні не завжди

### Subagents
- Визначаються у `.claude/agents/`
- Працюють у власному контексті з власними інструментами
- Можуть працювати паралельно
- Для ізоляції важких задач (code review, аналіз безпеки)

## Загальні поради для роботи з Claude Code
1. Давай Claude спосіб перевірити роботу — тести, скріншоти, очікуваний результат
2. Спершу дослідження, потім план, потім код (Plan Mode: Shift+Tab)
3. Керуй контекстом — `/clear` між незв'язаними задачами
4. Виправляй курс рано — `Esc` для зупинки, `/clear` для скидання
5. Після двох невдалих виправлень — почни заново
6. Тримай CLAUDE.md як код — ревʼюй, коли щось іде не так
